<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geolocation Example</title>
    <!-- Include Google Maps JavaScript API -->
    <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBJatJH8zDdYM-9MkZA4emi6WR2DbeKjaQ&libraries=places&callback=initMap"></script>
</head>
<body>
    <h1>Geolocation Example</h1>
    <label for="ipAddress">Enter IP Address:</label>
    <input type="text" id="ipAddress" name="ipAddress">
    <button onclick="traceLocation()">Trace Location</button>
    <div id="map" style="width: 100%; height: 400px;"></div>

    <script>
        function traceLocation() {
            var ipAddress = document.getElementById("ipAddress").value;

            // Check if IP address is provided
            if (!ipAddress) {
                alert("Please enter an IP address.");
                return;
            }

            // Fetch latitude and longitude from IP Geolocation API
            fetch('https://ipapi.co/' + ipAddress + '/json/')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to fetch IP location');
                    }
                    return response.json();
                })
                .then(data => {
                    var latitude = parseFloat(data.latitude);
                    var longitude = parseFloat(data.longitude);

                    // Initialize map centered at the received coordinates
                    var map = new google.maps.Map(document.getElementById('map'), {
                        center: {lat: latitude, lng: longitude},
                        zoom: 12 // Adjust zoom level as needed
                    });
                    
                    // Add marker at the received coordinates
                    var marker = new google.maps.Marker({
                        position: {lat: latitude, lng: longitude},
                        map: map
                    });
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert("Failed to trace location.");
                });
        }
    </script>
</body>
</html>
